<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Movement Assessment Application</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <style>
      body {
        background-image: url('static/images/doctor-results-on-tablet-700px.jpg');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: 100% 100%;
      }
    </style>
  </head>
  <body>
    <div class="container text-center" style="margin-top: 100px">
      <h2>Select Age<span style="color:red;">*</span></h2>
      <form
        method="POST"
        action="/dob"
        style="width: 505px; margin: 30px auto;"
      >
        <div class="mb-3">
          <input type="date" value="1980-07-22" id="dob" name="dob" onchange="checkAge()" required>
        </div>
        <div class="mb-3" style="float:left;">
          <P>Add weight (in lbs)</P>
          <input type="text" id="weight" name="weight" onchange="validateBMIWeight()">
        </div>
        <div class="mb-3">
          <p>Add height (in cm).</p>
          <input type="text" id="height" name="height" onchange="validateBMIHeight()">
        </div>
        <span id="ageError" style="color:red"></span>
        <div class="mb-3">
            <button
            type="submit"
            id="submit-btn"
            class="btn btn-primary mb-3"
            style="margin-top: 30px"
          >
            Analyze Data
          </button>
        </div>
      </form>
    </div>
    <div style="position:fixed; bottom:0;">
      <p style="padding-left: 20px;">
        For questions contact (<a href = "mailto: abc@example.com">rreid@stfx.ca</a>)
      </p>
    </div>
  <script>
    function checkAge() {
      // Get the value of the date input field
      var dob = document.getElementById("dob").value;

      // Calculate the difference between the selected date and today's date
      var ageDiffMillis = Date.now() - Date.parse(dob);

      // Convert the age difference from milliseconds to years
      var ageDate = new Date(ageDiffMillis);
      var age = Math.abs(ageDate.getUTCFullYear() - 1970);

      // Check if the age is less than 18
      if (age < 18) {
        document.getElementById("ageError").innerHTML = "Minimum required age is 18 !!";
        var myButton = document.getElementById("submit-btn");
        myButton.disabled = true;
      } else {
        document.getElementById("ageError").innerHTML = "";
        var myButton = document.getElementById("submit-btn");
        myButton.disabled = false;
      }
    }

    function validateBMIWeight() {
      // Convert the input to a number
      const weight = document.getElementById("weight").value;
      const numericInput = parseFloat(weight);

      // Check if the input is a valid number
      if (isNaN(numericInput)) {
        alert("Invalid input: Not a number");
        return;
      }

      // Define the BMI weight range (in pounds)
      const minWeight = 88;  // Equivalent to 40 kg
      const maxWeight = 330; // Equivalent to 150 kg

      // Check if the input is within the BMI weight range
      if (numericInput < minWeight || numericInput > maxWeight) {
        alert(`Invalid input: Weight should be between ${minWeight} and ${maxWeight} lbs`);
        return;
      }
    }

    function validateBMIHeight() {
      // Convert the input to a number
      const height = document.getElementById("height").value;
      const numericInput = parseFloat(height);

      // Check if the input is a valid number
      if (isNaN(numericInput)) {
        alert("Invalid input: Not a number");
        return;
      }

      // Define the BMI height range (in centimeters)
      const minHeight = 91;    // Equivalent to 3 feet (minimum height for a rough example)
      const maxHeight = 244;   // Equivalent to 8 feet (maximum height for a rough example)

      // Check if the input is within the BMI height range
      if (numericInput < minHeight || numericInput > maxHeight) {
        alert(`Invalid input: Height should be between ${minHeight} and ${maxHeight} cm`);
        return;
      }
    }



  </script>
  </body>
</html>
